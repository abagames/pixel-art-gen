!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sss=e():t.sss=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions={isMirrorX:!1,isMirrorY:!1,seed:0,hue:null,saturation:.8,value:1,rotationNum:1,scale:null,scaleX:null,scaleY:null,scalePattern:1,scalePatternX:null,scalePatternY:null,colorNoise:.1,colorLighting:1,edgeDarkness:.4,isShowingEdge:!0,isShowingBody:!0,isLimitingColors:!1};let r={},o=0;function s(t,n={}){n.baseSeed=o;const s=JSON.stringify({patterns:t,options:n});if(r[s])return r[s];let i={};f(e.defaultOptions,(t,e)=>{i[e]=t}),f(n,(t,e)=>{i[e]=t});const l=new g;let d=o+function(t){let e=0;const n=t.length;for(let r=0;r<n;r++){const n=t.charCodeAt(r);e=(e<<5)-e+n,e|=0}return e}(t.join());null!=i.seed&&(d+=i.seed),l.setSeed(d),null==i.hue&&(i.hue=l.get()),null==i.scalePatternX&&(i.scalePatternX=i.scalePattern),null==i.scalePatternY&&(i.scalePatternY=i.scalePattern);let M,y=function(t,e,n){let r=function(t,e,n){let r=n;for(let n=0;n<t.length;n++)r=e(r,t[n],n);return r}(t,(t,e)=>Math.max(t,e.length),0),o=t.length,s=Math.round(r*e.scalePatternX),i=Math.round(o*e.scalePatternY);s+=e.isMirrorX?1:2,i+=e.isMirrorY?1:2;let l=function(t,e,n,r,o,s,i,l){return h(r,r=>{const u=Math.floor((r-1)/s);return h(o,r=>{const o=Math.floor((r-1)/i);if(u<0||u>=e||o<0||o>=n)return 0;const s=u<t[o].length?t[o][u]:" ";let a=0;return"-"===s?a=l.get()<.5?1:0:"x"===s||"X"===s?a=l.get()<.5?1:-1:"o"===s||"O"===s?a=-1:"*"===s&&(a=1),a})})}(t,r,o,s,i,e.scalePatternX,e.scalePatternY,n);e.isMirrorX&&(l=function(t,e,n){return h(2*e,r=>h(n,n=>r<e?t[r][n]:t[2*e-r-1][n]))}(l,s,i),s*=2);e.isMirrorY&&(l=function(t,e,n){return h(e,e=>h(2*n,r=>r<n?t[e][r]:t[e][2*n-r-1]))}(l,s,i),i*=2);l=u(l,s,i),(null!=e.scale||null!=e.scaleX||null!=e.scaleY)&&(l=function(t,e,n,r){const o=null!=r.scaleX?r.scaleX:null!=r.scale?r.scale:1,s=null!=r.scaleY?r.scaleY:null!=r.scale?r.scale:1,i=Math.round(e*o),l=Math.round(n*s);let c=h(i,r=>{const i=Math.floor((r-1)/o);return h(l,r=>{const o=Math.floor((r-1)/s);return i<0||i>=e||o<0||o>=n?0:t[i][o]})});const f=(o+s)/2;return function(t,e){for(let n=0;n<t;n++)e(n)}(Math.floor((f-1)/2),()=>{c=function(t,e,n){return h(e,r=>h(n,o=>-1===t[r][o]&&a(t,e,n,0,r,o)?0:-1===t[r][o]&&a(t,e,n,1,r,o)?1:t[r][o]))}(c,i,l)}),u(c,i,l)}(l,s,i,e));return l}(t,i,l);return M=i.rotationNum>1?function(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(e(t[r],r));return n}(function(t,e){const n=t.length,r=t[0].length,o=n/2,s=r/2,i=Math.max(n,r),l=2*Math.round(1.5*i/2),u=2*Math.round(1.5*i/2),a=l/2,c=u/2;let f={x:0,y:0};return h(e,i=>{const g=-i*Math.PI*2/e;return h(l,e=>h(u,i=>{f.x=e-a,f.y=i-c,function(t,e){const n=t.x;t.x=Math.cos(e)*n-Math.sin(e)*t.y,t.y=Math.sin(e)*n+Math.cos(e)*t.y}(f,g);const l=Math.round(f.x+o),u=Math.round(f.y+s);return l<0||l>=n||u<0||u>=r?0:t[l][u]}))})}(y,i.rotationNum),t=>c(t,i)):[c(y,i)],r[s]=M,M}e.generate=s,e.generateImages=function(t,e={}){const n=s(t,e),r=n[0].length,o=n[0][0].length,i=document.createElement("canvas");i.width=r,i.height=o;const u=i.getContext("2d");let a=[];for(let t=0;t<n.length;t++){u.clearRect(0,0,r,o),l(u,n,r/2,o/2,t);const e=new Image;e.src=i.toDataURL(),a.push(e)}return a},e.setSeed=function(t=0){o=t},e.setDefaultOptions=function(t){f(t,(t,n)=>{e.defaultOptions[n]=t})};class i{constructor(){this.r=0,this.g=0,this.b=0,this.isEmpty=!0}setFromHsv(t,e,n,r=!1){this.isEmpty=!1,this.r=n,this.g=n,this.b=n;const o=6*t,s=Math.floor(o),i=o-s;switch(s){case 0:this.g*=1-e*(1-i),this.b*=1-e;break;case 1:this.b*=1-e,this.r*=1-e*i;break;case 2:this.b*=1-e*(1-i),this.r*=1-e;break;case 3:this.r*=1-e,this.g*=1-e*i;break;case 4:this.r*=1-e*(1-i),this.g*=1-e;break;case 5:this.g*=1-e,this.b*=1-e*i}!0===r&&(this.r=this.limitColor(this.r),this.g=this.limitColor(this.g),this.b=this.limitColor(this.b)),this.setStyle()}setStyle(){const t=Math.floor(255*this.r),e=Math.floor(255*this.g),n=Math.floor(255*this.b);this.style=`rgb(${t},${e},${n})`}limitColor(t){return t<.25?0:t<.75?.5:1}}function l(t,e,n,r,o=0){const s=e[o],i=s.length,l=s[0].length,u=Math.floor(n-i/2),a=Math.floor(r-l/2);for(let e=0,n=a;e<l;e++,n++)for(let r=0,o=u;r<i;r++,o++){const i=s[r][e];i.isEmpty||(t.fillStyle=i.style,t.fillRect(o,n,1,1))}}function u(t,e,n){return h(e,r=>h(n,o=>0===t[r][o]&&a(t,e,n,1,r,o)?-1:t[r][o]))}function a(t,e,n,r,o,s){return[[-1,0],[1,0],[0,-1],[0,1]].some(i=>{const l=o+i[0],u=s+i[1];return!(l<0||l>=e||u<0||u>=n)&&t[l][u]===r})}function c(t,e){const n=t.length,r=t[0].length;let o=0,s=!1;for(let e=0;e<r/2;e++){for(let o=0;o<n;o++)if(0!==t[o][e]||0!==t[o][r-1-e]){s=!0;break}if(s)break;o++}let l=r-2*o;l<=0&&(l=1);const u=new g;return u.setSeed(e.seed),h(n,n=>h(r,r=>{const s=t[n][r];if(1===s&&!e.isShowingBody||-1===s&&!e.isShowingEdge)return new i;if(0!==s){let t=((Math.sin((r-o)/l*Math.PI)*e.colorLighting+(1-e.colorLighting))*(1-e.colorNoise)+u.get()*e.colorNoise)*e.value;t=t>=0?t<=1?t:1:0,-1===s&&(t*=1-e.edgeDarkness);const n=new i;return n.setFromHsv(e.hue,e.saturation,t,e.isLimitingColors),n}return new i}))}function h(t,e){let n=[];for(let r=0;r<t;r++)n.push(e(r));return n}function f(t,e){for(let n in t)e(t[n],n)}e.Pixel=i,e.draw=l,e.drawImage=function(t,e,n,r,o=0){const s=e[o];t.drawImage(s,Math.floor(n-s.width/2),Math.floor(r-s.height/2))};class g{get(t=1,e=null){return null==e&&(e=t,t=0),this.getToMaxInt()/4294967295*(e-t)+t}getInt(t,e=null){return Math.floor(this.get(t,e))}getPm(){return 2*this.getInt(2)-1}select(t){return t[this.getInt(t.length)]}setSeed(t=null){return this.w=null!=t?t:Math.floor(4294967295*Math.random()),this.x=(0|this.w<<13)>>>0,this.y=(0|this.w>>>9^this.x<<6)>>>0,this.z=(0|this.y>>>7)>>>0,this}getToMaxInt(){const t=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=(this.w^this.w>>>19^t^t>>>8)>>>0,this.w}constructor(){this.setSeed(),this.get=this.get.bind(this),this.getToMaxInt=this.getToMaxInt.bind(this)}}}])});