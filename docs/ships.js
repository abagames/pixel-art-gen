!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSeedUi=function(t){var e=document.createElement("p");e.innerHTML='<button id="change">change</button>random seed: <input type="number" id="seed" value="0"></input><button id="set">set</button>',document.getElementsByTagName("body")[0].appendChild(e);const n=document.getElementById("change"),r=document.getElementById("seed"),o=document.getElementById("set");function i(){t(Number(r.value))}n.onclick=function(){r.value=Math.floor(9999999*Math.random()).toString(),i()},o.onclick=i},e.enableShowingErrors=function(){const t=document.createElement("pre");t.setAttribute("id","result"),document.getElementsByTagName("body")[0].appendChild(t),window.addEventListener("error",function(e){var n=[e.filename,"@",e.lineno,":\n",e.message].join("");return t.textContent+="\n"+n,!1})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions={isMirrorX:!1,isMirrorY:!1,seed:0,hue:null,saturation:.8,value:1,rotationNum:1,scale:null,scaleX:null,scaleY:null,scalePattern:1,scalePatternX:null,scalePatternY:null,colorNoise:.1,colorLighting:1,edgeDarkness:.4,isShowingEdge:!0,isShowingBody:!0,isLimitingColors:!1,isUsingLetterForm:!1,letterFormChar:"x",letterFormFontFamily:"monospace",letterFormFontSize:8,isRotatingLetterForm:!1};let r={},o={},i=0;function s(t,n={}){n.baseSeed=i;let o=Array.isArray(t)?t:t.split("\n");const s=JSON.stringify({patterns:o,options:n});if(r[s])return r[s];let l={};m(e.defaultOptions,(t,e)=>{l[e]=t}),m(n,(t,e)=>{l[e]=t});const a=new b;let u=i+function(t){let e=0;const n=t.length;for(let r=0;r<n;r++){const n=t.charCodeAt(r);e=(e<<5)-e+n,e|=0}return e}(o.join());null!=l.seed&&(u+=l.seed),a.setSeed(u),null==l.hue&&(l.hue=a.get()),null==l.scalePatternX&&(l.scalePatternX=l.scalePattern),null==l.scalePatternY&&(l.scalePatternY=l.scalePattern),l.isUsingLetterForm&&(o=function(t,e){const n=y(t,(t,e)=>Math.max(t,e.length),0),r=t.length,o=e.letterFormFontSize,i=Math.round(n*o),s=Math.round(r*o*1.2),l=document.createElement("canvas");l.width=i,l.height=s;const a=l.getContext("2d");a.font=`${o}px ${e.letterFormFontFamily}`,a.textBaseline="top",d(n,e=>{d(r,n=>{a.fillText(t[n][e],e*o,n*o*1.2)})});const u=a.getImageData(0,0,i,s).data,c=function(t,e,n){let r=e,o=-1,i=n,s=-1,l=3;return d(n,n=>{d(e,e=>{t[l]>0&&(r=e<r?e:r,o=e>o?e:o,i=n<i?n:i,s=n>s?n:s),l+=4})}),{bx:r,ex:o,by:i,ey:s}}(u,i,s),h=c.ex-c.bx+1,f=c.ey-c.by+1;let g=[];e.isRotatingLetterForm?d(h,t=>{let n="";d(f,r=>{const o=4*(t+c.bx+(c.ey-r)*i)+3;n+=u[o]>.5?e.letterFormChar:" "}),g.push(n)}):d(f,t=>{let n="";d(h,r=>{const o=4*(r+c.bx+(t+c.by)*i)+3;n+=u[o]>.5?e.letterFormChar:" "}),g.push(n)});return g}(o,l));let M,p=function(t,e,n){let r=y(t,(t,e)=>Math.max(t,e.length),0),o=t.length,i=Math.round(r*e.scalePatternX),s=Math.round(o*e.scalePatternY);i+=e.isMirrorX?1:2,s+=e.isMirrorY?1:2;let l=function(t,e,n,r,o,i,s,l){return g(r,r=>{const a=Math.floor((r-1)/i);return g(o,r=>{const o=Math.floor((r-1)/s);if(a<0||a>=e||o<0||o>=n)return 0;const i=a<t[o].length?t[o][a]:" ";let u=0;return"-"===i?u=l.get()<.5?1:0:"x"===i||"X"===i?u=l.get()<.5?1:-1:"o"===i||"O"===i?u=-1:"*"===i&&(u=1),u})})}(t,r,o,i,s,e.scalePatternX,e.scalePatternY,n);e.isMirrorX&&(l=function(t,e,n){return g(2*e,r=>g(n,n=>r<e?t[r][n]:t[2*e-r-1][n]))}(l,i,s),i*=2);e.isMirrorY&&(l=function(t,e,n){return g(e,e=>g(2*n,r=>r<n?t[e][r]:t[e][2*n-r-1]))}(l,i,s),s*=2);l=c(l,i,s),(null!=e.scale||null!=e.scaleX||null!=e.scaleY)&&(l=function(t,e,n,r){const o=null!=r.scaleX?r.scaleX:null!=r.scale?r.scale:1,i=null!=r.scaleY?r.scaleY:null!=r.scale?r.scale:1,s=Math.round(e*o),l=Math.round(n*i);let a=g(s,r=>{const s=Math.floor((r-1)/o);return g(l,r=>{const o=Math.floor((r-1)/i);return s<0||s>=e||o<0||o>=n?0:t[s][o]})});const u=(o+i)/2;return d(Math.floor((u-1)/2),()=>{a=function(t,e,n){return g(e,r=>g(n,o=>-1===t[r][o]&&h(t,e,n,0,r,o)?0:-1===t[r][o]&&h(t,e,n,1,r,o)?1:t[r][o]))}(a,s,l)}),c(a,s,l)}(l,i,s,e));return l}(o,l,a);return M=l.rotationNum>1?function(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(e(t[r],r));return n}(function(t,e){const n=t.length,r=t[0].length,o=n/2,i=r/2,s=Math.max(n,r),l=2*Math.round(1.5*s/2),a=2*Math.round(1.5*s/2),u=l/2,c=a/2;let h={x:0,y:0};return g(e,s=>{const f=-s*Math.PI*2/e;return g(l,e=>g(a,s=>{h.x=e-u,h.y=s-c,function(t,e){const n=t.x;t.x=Math.cos(e)*n-Math.sin(e)*t.y,t.y=Math.sin(e)*n+Math.cos(e)*t.y}(h,f);const l=Math.round(h.x+o),a=Math.round(h.y+i);return l<0||l>=n||a<0||a>=r?0:t[l][a]}))})}(p,l.rotationNum),t=>f(t,l)):[f(p,l)],r[s]=M,M}function l(t,e={},n=!1){e.baseSeed=i;let r=Array.isArray(t)?t:t.split("\n");const l=JSON.stringify({patterns:r,options:e});if(o[l])return o[l];const a=s(r,e),c=a[0].length,h=a[0][0].length,f=document.createElement("canvas");f.width=c,f.height=h;const d=f.getContext("2d");let g=[],m=[];for(let t=0;t<a.length;t++){d.clearRect(0,0,c,h),u(d,a,c/2,h/2,t);const e=new Image;n&&m.push(new Promise((t,n)=>{e.onload=(n=>{t(e)})})),e.src=f.toDataURL(),g.push(e)}return o[l]=g,n?Promise.all(m):g}e.generate=s,e.generateImages=function(t,e={}){return l(t,e)},e.generateImagesPromise=function(t,e={}){return l(t,e,!0)},e.setSeed=function(t=0){i=t},e.setDefaultOptions=function(t){m(t,(t,n)=>{e.defaultOptions[n]=t})};class a{constructor(){this.r=0,this.g=0,this.b=0,this.isEmpty=!0}setFromHsv(t,e,n,r=!1){this.isEmpty=!1,this.r=n,this.g=n,this.b=n;const o=6*t,i=Math.floor(o),s=o-i;switch(i){case 0:this.g*=1-e*(1-s),this.b*=1-e;break;case 1:this.b*=1-e,this.r*=1-e*s;break;case 2:this.b*=1-e*(1-s),this.r*=1-e;break;case 3:this.r*=1-e,this.g*=1-e*s;break;case 4:this.r*=1-e*(1-s),this.g*=1-e;break;case 5:this.g*=1-e,this.b*=1-e*s}!0===r&&(this.r=this.limitColor(this.r),this.g=this.limitColor(this.g),this.b=this.limitColor(this.b)),this.setStyle()}setStyle(){const t=Math.floor(255*this.r),e=Math.floor(255*this.g),n=Math.floor(255*this.b);this.style=`rgb(${t},${e},${n})`}limitColor(t){return t<.25?0:t<.75?.5:1}}function u(t,e,n,r,o=0){const i=e[o],s=i.length,l=i[0].length,a=Math.floor(n-s/2),u=Math.floor(r-l/2);for(let e=0,n=u;e<l;e++,n++)for(let r=0,o=a;r<s;r++,o++){const s=i[r][e];s.isEmpty||(t.fillStyle=s.style,t.fillRect(o,n,1,1))}}function c(t,e,n){return g(e,r=>g(n,o=>0===t[r][o]&&h(t,e,n,1,r,o)?-1:t[r][o]))}function h(t,e,n,r,o,i){return[[-1,0],[1,0],[0,-1],[0,1]].some(s=>{const l=o+s[0],a=i+s[1];return!(l<0||l>=e||a<0||a>=n)&&t[l][a]===r})}function f(t,e){const n=t.length,r=t[0].length;let o=0,i=!1;for(let e=0;e<r/2;e++){for(let o=0;o<n;o++)if(0!==t[o][e]||0!==t[o][r-1-e]){i=!0;break}if(i)break;o++}let s=r-2*o;s<=0&&(s=1);const l=new b;return l.setSeed(e.seed),g(n,n=>g(r,r=>{const i=t[n][r];if(1===i&&!e.isShowingBody||-1===i&&!e.isShowingEdge)return new a;if(0!==i){let t=((Math.sin((r-o)/s*Math.PI)*e.colorLighting+(1-e.colorLighting))*(1-e.colorNoise)+l.get()*e.colorNoise)*e.value;t=t>=0?t<=1?t:1:0,-1===i&&(t*=1-e.edgeDarkness);const n=new a;return n.setFromHsv(e.hue,e.saturation,t,e.isLimitingColors),n}return new a}))}function d(t,e){for(let n=0;n<t;n++)e(n)}function g(t,e){let n=[];for(let r=0;r<t;r++)n.push(e(r));return n}function m(t,e){for(let n in t)e(t[n],n)}function y(t,e,n){let r=n;for(let n=0;n<t.length;n++)r=e(r,t[n],n);return r}e.Pixel=a,e.draw=u,e.drawImage=function(t,e,n,r,o=0){const i=e[o];t.drawImage(i,Math.floor(n-i.width/2),Math.floor(r-i.height/2))};class b{get(t=1,e=null){return null==e&&(e=t,t=0),this.getToMaxInt()/4294967295*(e-t)+t}getInt(t,e=null){return Math.floor(this.get(t,e))}getPm(){return 2*this.getInt(2)-1}select(t){return t[this.getInt(t.length)]}setSeed(t=null){return this.w=null!=t?t:Math.floor(4294967295*Math.random()),this.x=(0|this.w<<13)>>>0,this.y=(0|this.w>>>9^this.x<<6)>>>0,this.z=(0|this.y>>>7)>>>0,this}getToMaxInt(){const t=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=(this.w^this.w>>>19^t^t>>>8)>>>0,this.w}constructor(){this.setSeed(),this.get=this.get.bind(this),this.getToMaxInt=this.getToMaxInt.bind(this)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function l(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,l)}a((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),i=n(0);let s,l;const a=128;function u(t){o.setSeed(t),h()}window.onload=function(){o.setSeed(0),i.enableShowingErrors(),i.initSeedUi(u),(s=document.createElement("canvas")).width=s.height=a,document.body.appendChild(s),l=s.getContext("2d"),o.setDefaultOptions({isMirrorY:!0}),h()};const c="\n ----\n---\n-x--\n-x-----";function h(){return r(this,void 0,void 0,function*(){l.fillStyle="black",l.fillRect(0,0,a,a);for(let t=0;t<8;t++){const e=yield o.generateImagesPromise(c,{scalePattern:2,seed:1001*(t+7)});o.drawImage(l,e,16*(t+.5),8)}for(let t=0;t<4;t++){const e=yield o.generateImagesPromise(c,{scale:2,scalePattern:2,seed:2002*(t+17)});o.drawImage(l,e,32*(t+.5),36)}for(let t=0;t<2;t++){const e=yield o.generateImagesPromise(c,{scale:4,scalePattern:2,seed:4004*(t+27)});o.drawImage(l,e,64*(t+.5),92)}})}}]);